" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber", sep = ",")) |>
mutate(nohousenumber = ifelse(`addr:housenumber`=="s/n", "yes", NA_character_),
`addr:housenumber` = ifelse(`addr:housenumber`=="s/n", NA_character_, `addr:nohousenumber`)) |>
rename("ref" = "idequipament",
"nom" = "name",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio")
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber", sep = ",")) |>
mutate(nohousenumber = ifelse(`addr:housenumber`=="s/n", "yes", NA_character_),
`addr:housenumber` = ifelse(`addr:housenumber`=="s/n", NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"nom" = "name",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio")
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber", sep = ",")) |>
mutate(nohousenumber = ifelse(`addr:housenumber`=="s/n", "yes", NA_character_),
`addr:housenumber` = ifelse(`addr:housenumber`=="s/n", NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio")
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
salut_be
View(salut_be)
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber"), sep = ",") |>
mutate(nohousenumber = ifelse(`addr:housenumber`=="s/n", "yes", NA_character_),
`addr:housenumber` = ifelse(`addr:housenumber`=="s/n", NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio")
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber"), sep = ",") |>
mutate(nohousenumber = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), "yes", NA_character_),
`addr:housenumber` = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio")
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
salut_be
x2 <- correspondences
View(x2)
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber"), sep = ",") |>
mutate(nohousenumber = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), "yes", NA_character_),
`addr:housenumber` = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio") |>
separate(categoria, into = c("categoria_1", "categoria_2", "categoria_3"),
sep = "\\|")
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
View(salut_be)
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber"), sep = ",") |>
mutate(nohousenumber = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), "yes", NA_character_),
`addr:housenumber` = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio") |>
separate(categoria, into = c("categoria_1", "categoria_2", "categoria_3", "categoria_4"),
sep = "\\|")
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
salut_be
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber"), sep = ",") |>
mutate(nohousenumber = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), "yes", NA_character_),
`addr:housenumber` = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio") |>
mutate(amenity = case_when(str_detect(categoria,"Hospitals") ~ "hospital",
str_detect(categoria, "Centres d'atenció primària (CAP)") & str_detect(categoria, "Consultori") ~ "doctors",
str_detect(categoria, "Centres d'atenció primària (CAP)") & !str_detect(categoria, "Consultori") |
str_detect(categoria, "Centres d'atenció i seguiment a les drogodependències") |
str_detect(categoria, "Centres amb intercanvi de xeringues") ~ "clinic",
str_detect(categoria, "Centres amb atenció continuada") ~ "clinic",
str_detect(categoria, "sociosanitaris") | str_detect(categoria, "Centres de salut mental") ~ "clinic OR hospital",
str_detect(categoria, "")))
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber"), sep = ",") |>
mutate(nohousenumber = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), "yes", NA_character_),
`addr:housenumber` = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio") |>
mutate(amenity = case_when(str_detect(categoria,"Hospitals") ~ "hospital",
str_detect(categoria, "Centres d'atenció primària (CAP)") & str_detect(categoria, "Consultori") ~ "doctors",
str_detect(categoria, "Centres d'atenció primària (CAP)") & !str_detect(categoria, "Consultori") |
str_detect(categoria, "Centres d'atenció i seguiment a les drogodependències") |
str_detect(categoria, "Centres amb intercanvi de xeringues") ~ "clinic",
str_detect(categoria, "Centres amb atenció continuada") ~ "clinic",
str_detect(categoria, "sociosanitaris") | str_detect(categoria, "Centres de salut mental") ~ "clinic OR hospital",
TRUE ~ "REVISAR"))
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
salut_be
View(salut_be)
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber"), sep = ",") |>
mutate(nohousenumber = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), "yes", NA_character_),
`addr:housenumber` = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio") |>
mutate(amenity = case_when(str_detect(categoria,"Hospitals") ~ "hospital",
str_detect(categoria, "Centres d'atenció primària (CAP)") & str_detect(name, "Consultori") ~ "doctors",
str_detect(categoria, "Centres d'atenció primària (CAP)") & !str_detect(name, "Consultori") |
str_detect(categoria, "Centres d'atenció i seguiment a les drogodependències") |
str_detect(categoria, "Centres amb intercanvi de xeringues") ~ "clinic",
str_detect(categoria, "Centres amb atenció continuada") ~ "clinic",
str_detect(categoria, "sociosanitaris") | str_detect(categoria, "Centres de salut mental") ~ "clinic OR hospital",
TRUE ~ "REVISAR"))
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
salut_be
View(salut_be)
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber"), sep = ",") |>
mutate(nohousenumber = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), "yes", NA_character_),
`addr:housenumber` = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio") |>
mutate(amenity = case_when(str_detect(categoria,"Hospitals") ~ "hospital",
str_detect(name, "Consultori") ~ "doctors",
str_detect(categoria, "Centres d'atenció primària (CAP)") |
str_detect(categoria, "Centres d'atenció i seguiment a les drogodependències") |
str_detect(categoria, "Centres amb intercanvi de xeringues") ~ "clinic",
str_detect(categoria, "Centres amb atenció continuada") ~ "clinic",
str_detect(categoria, "sociosanitaris") | str_detect(categoria, "Centres de salut mental") ~ "clinic OR hospital",
TRUE ~ "REVISAR"))
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
View(salut_be)
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber"), sep = ",") |>
mutate(nohousenumber = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), "yes", NA_character_),
`addr:housenumber` = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio") |>
mutate(amenity = case_when(str_detect(categoria,"Hospitals") ~ "hospital",
str_detect(name, "Consultori") ~ "doctors",
str_detect(categoria, "Centres d'atenció primària") |
str_detect(categoria, "Centres d'atenció i seguiment a les drogodependències") |
str_detect(categoria, "Centres amb intercanvi de xeringues") ~ "clinic",
str_detect(categoria, "Centres amb atenció continuada") ~ "clinic",
str_detect(categoria, "sociosanitaris") | str_detect(categoria, "Centres de salut mental") ~ "clinic OR hospital",
TRUE ~ "REVISAR"))
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
salut_be
View(salut_be)
get_gencat_healthcare <- function(place, is_sf = TRUE){
# filter tags
baseurl <- "https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.json?$query="
bbox <- get_filter_bbox(place, transform = FALSE)
query <- paste0("SELECT * WHERE longitud >= ",bbox[2],
" AND longitud <= ",bbox[4],
" AND latitud >= ",bbox[1],
" AND latitud <= ",bbox[3],
" AND categoria LIKE '%Centres sanitaris%'",
collapse = "")
query <- str_replace_all(query, "%","%25")
query <- str_replace_all(query, "'", "%27")
query <- str_replace_all(query," ","%20")
healthcare <- GET(paste0(baseurl, query)) |>
content(as = "text") |>
fromJSON()
healthcare <- healthcare |>
select(-c(alies, utmx, utmy, localitzacio, data_modificacio, codi_municipi, comarca)) |>
separate(via, into = c("addr:street", "addr:housenumber"), sep = ",") |>
mutate(nohousenumber = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), "yes", NA_character_),
`addr:housenumber` = ifelse(str_detect(str_to_lower(`addr:housenumber`), "s/n"), NA_character_, `addr:housenumber`)) |>
rename("ref" = "idequipament",
"name" = "nom",
"addr:postcode" = "cpostal",
"contact:phone" = "telefon1",
"contact:fax" = "fax",
"contact:phone2" = "telefon2",
"contact:email" = "email",
"addr:city" = "poblacio") |>
mutate(amenity = case_when(str_detect(categoria,"Hospitals") ~ "hospital",
str_detect(name, "Consultori") ~ "doctors",
str_detect(categoria, "Centres d'atenció primària") |
str_detect(categoria, "Centres d'atenció i seguiment a les drogodependències") |
str_detect(categoria, "Centres amb intercanvi de xeringues") ~ "clinic",
str_detect(categoria, "Centres amb atenció continuada") ~ "clinic",
str_detect(categoria, "sociosanitaris") | str_detect(categoria, "Centres de salut mental") ~ "clinic OR hospital",
TRUE ~ "REVISAR"),
healthcare = amenity,
`healthcare:counselling` = ifelse(str_detect(categoria, "Centres d'atenció i seguiment a les drogodependències") |
str_detect(categoria, "Centres amb intercanvi de xeringues"), "addiction", NA_character_),
`healthcare:speciality` = case_when(str_detect(categoria, "Centres amb atenció continuada") ~ "emergency",
str_detect(categoria, "Centres de salut mental") ~ "psychiatry",
TRUE ~ NA_character_))
return(healthcare)
}
salut_be <- get_gencat_healthcare(place = "Baix Empordà")
View(salut_be)
devtools::document()
devtools::document()
library(catosmamenities)
salut_be |> as_tibble()
salut_be$propietats
head(select(salut_be, propietats))
head(as_tibble(select(salut_be, propietats)))
head(as_tibble(select(salut_be, propietats)), 10)
head(as_tibble(select(salut_be, propietats)), 20)
hours <- sapply(salut_be$propietats, str_extract_all("\\d{1:2}") USE.NAMES = FALSE)
hours <- sapply(salut_be$propietats, str_extract_all("\\d{1:2}"), USE.NAMES = FALSE)
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1:2}"), USE.NAMES = FALSE)
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1,2}"), USE.NAMES = FALSE)
hours
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1,2}:?\\d{0,2"), USE.NAMES = FALSE)
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1,2}:?\\d{0,1,2"), USE.NAMES = FALSE)
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1,2}:?\\d{0,1,2}"), USE.NAMES = FALSE)
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1,2}:?\\d{1,2}?"), USE.NAMES = FALSE)
hours
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1,2}:?\\d{2}?"), USE.NAMES = FALSE)
hous
hours
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1,2}{:\\d{2}}?"), USE.NAMES = FALSE)
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1,2}[:\\d{2}]?"), USE.NAMES = FALSE)
hours
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1,2}:?\\d{2}?"), USE.NAMES = FALSE)
hours
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "\\d{1,2}:?[ a ]?\\d{2}?"), USE.NAMES = FALSE)
hours
hours <- sapply(salut_be$propietats, \(x) str_extract_all(x, "[\\d{1,2}][:]?[\\d{2}]?"), USE.NAMES = FALSE)
hours
